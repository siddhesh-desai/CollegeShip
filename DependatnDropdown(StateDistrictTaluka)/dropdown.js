var mydata =[
    ["State","District","Taluka"],
    ["Maharashtra","Solapur","Pandharpur"],
    ["Maharashtra","Solapur","Mangalvedhe"],
    ["Maharashtra","Solapur","Solapur North"],
    ["Maharashtra","Solapur","Malshiras"],
    ["Maharashtra","Solapur","Barshi"],
    ["Maharashtra","Solapur","Madha"],
    ["Maharashtra","Solapur","Sangole"],
    ["Maharashtra","Solapur","Akkalkot"],
    ["Maharashtra","Solapur","Mohol"],
    ["Maharashtra","Solapur","Solapur South"],
    ["Maharashtra","Solapur","Karmala"],
    ["Maharashtra","Sindhudurg","Kankavli"],
    ["Maharashtra","Sindhudurg","Vaibhavwadi"],
    ["Maharashtra","Sindhudurg","Devgad"],
    ["Maharashtra","Sindhudurg","Malwan"],
    ["Maharashtra","Sindhudurg","Sawantwadi"],
    ["Maharashtra","Sindhudurg","Kudal"],
    ["Maharashtra","Sindhudurg","Vengurla"],
    ["Maharashtra","Sindhudurg","Dodamarg (Kasal)"],
    ["Maharashtra","Ratnagiri","Ratnagiri"],
    ["Maharashtra","Ratnagiri","Sangameshwar"],
    ["Maharashtra","Ratnagiri","Lanja "],
    ["Maharashtra","Ratnagiri","Rajapur "],
    ["Maharashtra","Ratnagiri","Chiplun "],
    ["Maharashtra","Ratnagiri","Guhagar"],
    ["Maharashtra","Ratnagiri","Dapoli"],
    ["Maharashtra","Ratnagiri","Mandangad"],
    ["Maharashtra","Ratnagiri","Khed"],
    ["Maharashtra","Raigad","Pen"],
    ["Maharashtra","Raigad","Alibaug"],
    ["Maharashtra","Raigad","Murud"],
    ["Maharashtra","Raigad","Panvel"],
    ["Maharashtra","Raigad","Uran"],
    ["Maharashtra","Raigad","Karjat"],
    ["Maharashtra","Raigad","Khalapur"],
    ["Maharashtra","Raigad","Mangaon"],
    ["Maharashtra","Raigad","Tala"],
    ["Maharashtra","Raigad","Roha"],
    ["Maharashtra","Raigad","Sudhagad (Pali)"],
    ["Maharashtra","Raigad","Mahad"],
    ["Maharashtra","Raigad","Poladpur"],
    ["Maharashtra","Raigad","Shrivardhan"],
    ["Maharashtra","Raigad","Mhasla "],
    ["Maharashtra","Mumbai","Kurla"],
    ["Maharashtra","Mumbai","Andheri "],
    ["Maharashtra","Mumbai","Borivali"],
    ["Maharashtra","Thane","Thane"],
    ["Maharashtra","Thane","Kalyan"],
    ["Maharashtra","Thane","Murbad"],
    ["Maharashtra","Thane","Bhiwandi "],
    ["Maharashtra","Thane","Shahapur"],
    ["Maharashtra","Thane","Ulhasnagar"],
    ["Maharashtra","Thane","Ambarnath"],
    ["Maharashtra","Palghar","Palghar"],
    ["Maharashtra","Palghar","Vasai "],
    ["Maharashtra","Palghar","Dahanu"],
    ["Maharashtra","Palghar","Talasari"],
    ["Maharashtra","Palghar","Jawhar"],
    ["Maharashtra","Palghar","Mokhada"],
    ["Maharashtra","Palghar","Vada"],
    ["Maharashtra","Palghar","Vikramgad "],
    ["Maharashtra","Nashik","Nashik"],
    ["Maharashtra","Nashik","Igatpuri"],
    ["Maharashtra","Nashik","Dindori"],
    ["Maharashtra","Nashik","Peth"],
    ["Maharashtra","Nashik","Trimbakeshwar "],
    ["Maharashtra","Nashik","Kalwan"],
    ["Maharashtra","Nashik","Deola "],
    ["Maharashtra","Nashik","Surgana"],
    ["Maharashtra","Nashik","Baglan (Satana)"],
    ["Maharashtra","Nashik","Malegaon"],
    ["Maharashtra","Nashik","Nandgaon"],
    ["Maharashtra","Nashik","Chandwad"],
    ["Maharashtra","Nashik","Niphad"],
    ["Maharashtra","Nashik","Sinnar"],
    ["Maharashtra","Nandurbar","Nandurbar"],
    ["Maharashtra","Nandurbar","Navapur"],
    ["Maharashtra","Nandurbar","Shahada "],
    ["Maharashtra","Nandurbar","Talode "],
    ["Maharashtra","Nandurbar","Akkalkuwa "],
    ["Maharashtra","Nandurbar","Akrani (Dhadgaon)  "],
    ["Maharashtra","Dhule","Dhule "],
    ["Maharashtra","Dhule","Sakri "],
    ["Maharashtra","Dhule","Sindkheda "],
    ["Maharashtra","Dhule","Shirpur  "],
    ["Maharashtra","Jalgaon","Jalgaon  "],
    ["Maharashtra","Jalgaon","Jamner   "],
    ["Maharashtra","Jalgaon","Erandol   "],
    ["Maharashtra","Jalgaon","Dharangaon "],
    ["Maharashtra","Jalgaon","Bhusawal  "],
    ["Maharashtra","Jalgaon","Muktainagar (Edalabad)"],
    ["Maharashtra","Jalgaon","Bodwad    "],
    ["Maharashtra","Jalgaon","Yawal   "],
    ["Maharashtra","Jalgaon","Amalner   "],
    ["Maharashtra","Jalgaon","Parola    "],
    ["Maharashtra","Jalgaon","Chopda    "],
    ["Maharashtra","Jalgaon","Pachora"],
    ["Maharashtra","Jalgaon","Bhadgaon"],
    ["Maharashtra","Jalgaon","Chalisgaon"],
    ["Maharashtra","Pune","Pune City"],
    ["Maharashtra","Pune","Haveli"],
    ["Maharashtra","Pune","Khed"],
    ["Maharashtra","Pune","Junnar"],
    ["Maharashtra","Pune","Maval"],
    ["Maharashtra","Pune","Mulshi (Paud)"],
    ["Maharashtra","Pune","Shirur"],
    ["Maharashtra","Pune","Velhe"],
    ["Maharashtra","Pune","Bhor"],
    ["Maharashtra","Pune","Baramati"],
    ["Maharashtra","Pune","Indapur"],
    ["Maharashtra","Pune","Daund "],
    ["Maharashtra","Pune","Purandhar (Saswad)"],
    ["Maharashtra","Kolhapur","Karvir"],
    ["Maharashtra","Kolhapur","Panhala "],
    ["Maharashtra","Kolhapur","Shahuwadi"],
    ["Maharashtra","Kolhapur","Kagal"],
    ["Maharashtra","Kolhapur","Hatkanangale"],
    ["Maharashtra","Kolhapur","Shirol"],
    ["Maharashtra","Kolhapur","Radhanagari "],
    ["Maharashtra","Kolhapur","Gaganbawada"],
    ["Maharashtra","Kolhapur","Bhudargad"],
    ["Maharashtra","Kolhapur","Gadhinglaj"],
    ["Maharashtra","Kolhapur","Chandgad"],
    ["Maharashtra","Kolhapur","Ajra"],
    ["Telangana","Hyderabad","Amberpet"],
    ["Telangana","Hyderabad","Ameerpet"],
    ["Telangana","Hyderabad","Asifnagar"],
    ["Telangana","Hyderabad","Bahadurpura"],
    ["Telangana","Hyderabad","Balanagar"],
    ["Telangana","Hyderabad","Bandlaguda"],
    ["Telangana","Hyderabad","Charminar"],
    ["Telangana","Hyderabad","Ghatkesar"],
    ["Telangana","Adilabad","Adilabad"],
    ["Telangana","Adilabad","Asifabad"],
    ["Telangana","Adilabad","Bazarhathnoor"],
    ["Telangana","Adilabad","Bejjur"],
    ["Telangana","Adilabad","Bela"],
    ["Telangana","Adilabad","Bellampalle"],
    ["Telangana","Karim Nagar","Bejjanki"],
    ["Telangana","Karim Nagar","Bheemadevarpalle"],
    ["Telangana","Karim Nagar","Boenpali"],
    ["Telangana","Karim Nagar","Chandurthi"],
    ["Telangana","Karim Nagar","Chendurthy"],
    ["Telangana","Karim Nagar","Chigurumamidi"],
    ["Telangana","Khammam","Aswapuram"],
    ["Telangana","Khammam","Aswaraopet"],
    ["Telangana","Khammam","Bayyaram"],
    ["Telangana","Khammam","Bonakal"],
    ["Telangana","Khammam","Charal"],
    ["Telangana","Khammam","Chintakani"],
    ["Telangana","Khammam","Chintur"],
    ["Andhra Pradesh","Adilabad","Talamadugu"],
    ["Andhra Pradesh","Adilabad","Tamsi"],
    ["Andhra Pradesh","Adilabad","Adilabad"],
    ["Andhra Pradesh","Adilabad","Jainad"],
    ["Andhra Pradesh","Adilabad","Bela"],
    ["Andhra Pradesh","Adilabad","Narnoor"],
    ["Andhra Pradesh","Anantapur","Bommanahal"],
    ["Andhra Pradesh","Anantapur","Vidapanakal"],
    ["Andhra Pradesh","Anantapur","Vajrakarur"],
    ["Andhra Pradesh","Anantapur","Guntakkal"],
    ["Andhra Pradesh","Anantapur","Gooty"],
    ["Andhra Pradesh","Anantapur","Peddavadugur"],
    ["Andhra Pradesh","Chittoor","Chittoor"],
    ["Andhra Pradesh","Chittoor","Palamaner"],
    ["Andhra Pradesh","Chittoor","Nagari"],
    ["Andhra Pradesh","Chittoor","Pichatur"],
    ["Andhra Pradesh","Chittoor","Nindra"],
    ["Andhra Pradesh","Chittoor","Chittoor"],
    ["Andhra Pradesh","Chittoor","Chandragiri"],
    ["Andhra Pradesh","Guntur","Achampeta"],
    ["Andhra Pradesh","Guntur","Amaravathi"],
    ["Andhra Pradesh","Guntur","Kollipara"],
    ["Andhra Pradesh","Guntur","Tadikonda"],
    ["Andhra Pradesh","Guntur","Tenali"],
    ["Andhra Pradesh","Guntur","Nuzendla"]  
  
];



function makeDropDown(data,filterAsArray,targetElement){
    const filteredArray = filterArray(data,filterAsArray);    

    const uniqueList = getUniqueValues(filteredArray,filterAsArray.length);    

    populateDropDown(targetElement,uniqueList);

}

// makeDropDown(mydata,"Honda");

function applyDropDown(){
    const selectLevel1Value = document.getElementById("level1").value;
    const selectLevel2 = document.getElementById("level2");
    makeDropDown(mydata,[selectLevel1Value],selectLevel2);
    applyDropDown2();
}
function applyDropDown2(){
    const selectLevel1Value = document.getElementById("level1").value;
    const selectLevel2Value = document.getElementById("level2").value;
    const selectLevel3 = document.getElementById("level3");
    makeDropDown(mydata,[selectLevel1Value,selectLevel2Value],selectLevel3);
}

function afterDocumentLoads(){
    populateFirstLevelDropDown()
    applyDropDown();
}

function getUniqueValues(data,index){
    const uniqueOptions = new Set();
    data.forEach(r => uniqueOptions.add(r[index]));

    return [...uniqueOptions];
}

function populateFirstLevelDropDown(){
    const uniqueList = getUniqueValues(mydata,0);
    const el = document.getElementById("level1")
    populateDropDown(el,uniqueList);


}

 function populateDropDown(el,listAsArray){
    el.innerHTML ="";


    listAsArray.forEach(item =>{
    const option = document.createElement("option");
    option.textContent=item;
    el.appendChild(option);
    });
}


function filterArray(data,filterAsArray){

  return  data.filter(r => filterAsArray.every((item,i) => item === r[i]));
}




document.getElementById("level1").addEventListener("change",applyDropDown);
document.getElementById("level2").addEventListener("change",applyDropDown2);
document.addEventListener("DOMContentLoaded",afterDocumentLoads);

